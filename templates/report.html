{% extends 'dashboard.html' %}

{% block title %}
    Informe
{% endblock %}

{% block content %}
    <h2 style="margin-bottom: 20px;"></h2>
    <h2 style="margin-top: 30px; margin-bottom: 20px; font-size: 40px; text-align: center;">Informe final</h2>

    <!-- Sección de Información General -->
    <div style="font-size: 25px; text-align: justify;">
        {% for info in general_info_data %}    
            <p><strong><span style="font-size: 30px;">INFORMACIÓN GENERAL</span></strong></p>    
            <p><strong>Fecha del experimento:</strong> {{ info.experiment_date }}</p>
            <p><strong>Número del experimento:</strong> {{ info.experiment_number }}</p>
            <p><strong>Investigador principal:</strong> {{ info.principal_investigator }}</p>
            <p><strong>Institución (y Laboratorio):</strong> {{ info.institution_lab }}</p>
        {% endfor %}
    </div>

    <!-- Espacio entre secciones -->
    <div style="margin-top: 50px;"></div>

    <!-- Sección de Diseño Experimental -->
    <div style="font-size: 25px; text-align: justify;">
        {% for data in design_data %}
            <p><strong><span style="font-size: 30px;">DISEÑO EXPERIMENTAL</span></strong></p>     
            <p><strong>Definición del grupo control:</strong> {{ data.group_control_definition }}</p>
            <p><strong>Definición del grupo experimental:</strong> {{ data.group_experimental_definition }}</p>
            <p><strong>Número del grupo control:</strong> {{ data.group_control_number }}</p>
            <p><strong>Número del grupo experimental:</strong> {{ data.group_experimental_number }}</p>
        {% endfor %}
    </div>
    
    <div style="margin-top: 50px;"></div>

    <label style="font-size: 25px; text-align: justify;">
    {% for sample in sample_data %}
        <p><strong><span style="font-size: 30px;">MUESTRA</span></strong></p>     
        <p><strong>Tipo de muestra:</strong> {{ sample.sample_type }}</p>
        <p><strong>Descripción:</strong> {{ sample.sample_description }}</p>
        <p><strong>Volumen/Masa de la muestra procesada:</strong> {{ sample.sample_volume_mass }}</p>
        <p><strong>Procedimiento de muestreo:</strong> {{ sample.sampling_procedure }}</p>
        <p><strong>Método de congelación:</strong> {{ sample.freezing_method }}</p>
        <p><strong>Método de fijación:</strong> {{ sample.fixation_method }}</p>
        <p><strong>Condiciones de almacenamiento y duración:</strong> {{ sample.storage_conditions }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>

    <label style="font-size: 25px; text-align: justify;">
    {% for extraction in extraction_data %}
        <p><strong><span style="font-size: 30px;">EXTRACCIÓN DE ÁCIDO NUCLEICO</span></strong></p>     
        <p><strong>Procedimiento de extracción:</strong> {{ extraction.extraction_procedure }}</p>
        <p><strong>Detalles del kit y modificaciones:</strong> {{ extraction.kit_details }}</p>
        <p><strong>Fuente de reactivos adicionales utilizados:</strong> {{ extraction.additional_reagents }}</p>
        <p><strong>Detalles del tratamiento de DNasa o RNasa:</strong> {{ extraction.dnase_rnase_treatment }}</p>
        <p><strong>Evaluación de contaminación:</strong> {{ extraction.contamination_evaluation }}</p>
        <p><strong>Método de cuantificación de ácido nucleico:</strong> {{ extraction.nucleic_acid_quantification_method }}</p>
        <p><strong>Pureza de ácido nucleico:</strong> {{ extraction.nucleic_acid_purity }}</p>
        <p><strong>Rendimiento de ácido nucleico:</strong> {{ extraction.nucleic_acid_yield }}</p>
        <p><strong>Método de evaluación de integridad (ARN):</strong> {{ extraction.integrity_assessment_method }}</p>
        <p><strong>RIN/RQI o Cq de transcripciones 3’ y 5’:</strong> {{ extraction.rin_rqi_cq_details }}</p>
        <p><strong>Traces de electroforesis:</strong> {{ extraction.electrophoresis_traces }}</p>
        <p><strong>Pruebas de inhibición:</strong> {{ extraction.inhibition_testing }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
    
    <label style="font-size: 25px; text-align: justify;">
    {% for data in reverse_transcription_data %}
    <p><strong><span style="font-size: 30px;">TRANSCRIPCIÓN INVERSA</span></strong></p>     
    <p><strong>Condiciones de reacción:</strong> {{ data.reaction_conditions }}</p>
        <p><strong>Cantidad de RNA:</strong> {{ data.rna_quantity }}</p>
        <p><strong>Volumenes de reacción:</strong> {{ data.reaction_volumes }}</p>
        <p><strong>Oligonucleótidos de cebado:</strong> {{ data.reverse_transcriptase_oligo_priming }}</p>
        <p><strong>Concentración de oligonucleótidos de cebado:</strong> {{ data.reverse_transcriptase_oligo_concentration }}</p>
        <p><strong>Tipo de transcriptasa inversa:</strong> {{ data.reverse_transcriptase_type }}</p>
        <p><strong>Concentración de transcriptasa inversa:</strong> {{ data.reverse_transcriptase_concentration }}</p>
        <p><strong>Temperatura de transcriptasa inversa:</strong> {{ data.reverse_transcriptase_temperature }}</p>
        <p><strong>Tiempo de reacción de transcriptasa inversa:</strong> {{ data.reverse_transcriptase_reaction_time }}</p>
        <p><strong>Fabricante de la transcriptasa inversa:</strong> {{ data.reverse_transcriptase_manufacturer }}</p>
        <p><strong>Número de catálogo de la transcriptasa inversa:</strong> {{ data.reverse_transcriptase_catalog_number }}</p>
        <p><strong>Condiciones de almacenamiento del cDNA:</strong> {{ data.cdna_storage_conditions }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>

    <label style="font-size: 25px; text-align: justify;">
    {% for target in target_data %}
        <p><strong><span style="font-size: 30px;">INFORMACIÓN DEL OBJETIVO DE qPCR</span></strong></p>     
        <p><strong>Símbolo del gen:</strong> {{ target.gene_symbol }}</p>
        <p><strong>Eficiencia multiplex y LOD para cada ensayo:</strong> {{ target.multiplex_efficiency_lod }}</p>
        <p><strong>Número de acceso a la secuencia:</strong> {{ target.sequence_accession_number }}</p>
        <p><strong>Ubicación del amplicón:</strong> {{ target.amplicon_location }}</p>
        <p><strong>Longitud del amplicón:</strong> {{ target.amplicon_length }}</p>
        <p><strong>Selección de especificidad In Silico (BLAST, etc.):</strong> {{ target.in_silico_specificity_screening }}</p>
        <p><strong>Pseudogenes, Retropseudogenes u otros homólogos:</strong> {{ target.pseudogenes_homologs }}</p>
        <p><strong>Alineación de secuencia:</strong> {{ target.sequence_alignment }}</p>
        <p><strong>Análisis de estructura secundaria del amplicón:</strong> {{ target.amplicon_secondary_structure_analysis }}</p>
        <p><strong>Ubicación del iniciador por exón o intrón (si aplica):</strong> {{ target.primer_location_exon_intron }}</p>
        <p><strong>Variantes de empalme targeteadas:</strong> {{ target.splicing_variants_targeted }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
    
    <label style="font-size: 25px; text-align: justify;">
    {% for primer in primer_data %}
        <p><strong><span style="font-size: 30px;">PRIMERS qPCR</span></strong></p>     
        <p><strong>Secuencia forward:</strong> {{ primer.forward_sequence }}</p>
        <p><strong>Secuencia reverse:</strong> {{ primer.reverse_sequence }}</p>
        <p><strong>Número de identificación en RTPrimerDB:</strong> {{ primer.rtprimerdb_id }}</p>
        <p><strong>Secuencias de la sonda (si corresponde):</strong> {{ primer.probe_sequences }}</p>
        <p><strong>Ubicación y identidad de la modificación:</strong> {{ primer.modification_location_identity }}</p>
        <p><strong>Fabricante del oligo:</strong> {{ primer.oligo_manufacturer }}</p>
        <p><strong>Método de purificación:</strong> {{ primer.purification_method }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
    
    <label style="font-size: 25px; text-align: justify;">
    {% for protocol in protocol_data %}
        <p><strong><span style="font-size: 30px;">PROTOCOLO qPCR</span></strong></p>    
        <p><strong>Condiciones de reacción:</strong> {{ protocol.reaction_conditions }}</p>
        <p><strong>Volumen de reacción y cantidad de ADN:</strong> {{ protocol.reaction_volume_dna_quantity }}</p>
        <p><strong>Concentraciones de cebadores, sondas, Mg++ y dNTP:</strong> {{ protocol.primer_probe_concentrations }}</p>
        <p><strong>Identidad de la polimerasa y concentración:</strong> {{ protocol.polymerase_identity_concentration }}</p>
        <p><strong>Identidad y fabricante del buffer/kit:</strong> {{ protocol.buffer_kit_identity_manufacturer }}</p>
        <p><strong>Constitución química exacta del buffer:</strong> {{ protocol.buffer_exact_chemical_constitution }}</p>
        <p><strong>Aditivos:</strong> {{ protocol.additives }}</p>
        <p><strong>Fabricante y número de catálogo de las placas/tubos:</strong> {{ protocol.plates_tubes_manufacturer_catalog }}</p>
        <p><strong>Parámetros de termociclado:</strong> {{ protocol.thermocycling_parameters }}</p>
        <p><strong>Configuración de la reacción (manual/automática):</strong> {{ protocol.reaction_configuration }}</p>
        <p><strong>Fabricante del instrumento qPCR:</strong> {{ protocol.qpcr_instrument_manufacturer }}</p>
        <p><strong>Control de calidad de la reacción:</strong> {{ protocol.reaction_quality_control }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>

    <label style="font-size: 25px; text-align: justify;">
    {% for thermal in thermal_data %}
        <p><strong><span style="font-size: 30px;">CONDICIONES DE TERMOCICLADO</span></strong></p>    
        <p><strong>Equipo utilizado:</strong> {{ thermal.equipment_used }}</p>
        <p><strong>Primers utilizados:</strong> {{ thermal.primers_used }}</p>
        <p><strong>Condiciones PCR:</strong> {{ thermal.pcr_conditions }}</p>
        <p><strong>Volumen de reacción:</strong> {{ thermal.reaction_volume }}</p>
        <p><strong>Control positivo:</strong> {{ thermal.positive_control }}</p>
        <p><strong>Control negativo:</strong> {{ thermal.negative_control }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
    
    <label style="font-size: 25px; text-align: justify;">
    {% for validation in validation_data %}
        <p><strong><span style="font-size: 30px;">VALIDACIÓN DE qPCR</span></strong></p>    
        <p><strong>Evidencia de optimización:</strong> {{ validation.optimization_evidence }}</p>
        <p><strong>Evidencia de especificidad:</strong> {{ validation.specificity_evidence }}</p>
        <p><strong>Cq de NCT para SYBR Green I:</strong> {{ validation.cq_nct_for_sybr_green }}</p>
        <p><strong>Curvas estándar con pendiente e intercepto:</strong> {{ validation.standard_curves_slope_intercept }}</p>
        <p><strong>PCR Eficiencia calculada a partir de la pendiente:</strong> {{ validation.pcr_efficiency_slope_calculation }}</p>
        <p><strong>Intervalo de confianza para la eficiencia de PCR:</strong> {{ validation.pcr_efficiency_confidence_interval }}</p>
        <p><strong>R^2 de la curva estándar:</strong> {{ validation.r2_standard_curve }}</p>
        <p><strong>Rango dinámico lineal:</strong> {{ validation.linear_dynamic_range }}</p>
        <p><strong>Variación de Cq en el Límite Inferior:</strong> {{ validation.cq_variation_lower_limit }}</p>
        <p><strong>Intervalos de confianza en todo el rango:</strong> {{ validation.confidence_intervals_full_range }}</p>
        <p><strong>Evidencia de LOD:</strong> {{ validation.lod_evidence }}</p>
        <p><strong>Si es multiplex, eficiencia y LOD para cada ensayo:</strong> {{ validation.multiplex_efficiency_lod }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
   
    <label style="font-size: 25px; text-align: justify;">
    {% for data_analysis in data_analysis_data %}
        <p><strong><span style="font-size: 30px;">ANÁLISIS DE DATOS</span></strong></p>     
        <p><strong>Programa de análisis de qPCR:</strong> {{ data_analysis.qpcr_analysis_program }}</p>
        <p><strong>Método de determinación de Cq:</strong> {{ data_analysis.cq_method_determination }}</p>
        <p><strong>Identificación y manejo de valores atípicos:</strong> {{ data_analysis.identification_handling_outliers }}</p>
        <p><strong>Resultados de NTC:</strong> {{ data_analysis.ntc_results }}</p>
        <p><strong>Justificación del número y elección de genes de referencia:</strong> {{ data_analysis.reference_genes_justification }}</p>
        <p><strong>Descripción del método de normalización:</strong> {{ data_analysis.normalization_method_description }}</p>
        <p><strong>Número y concordancia de réplicas biológicas:</strong> {{ data_analysis.biological_replicates_number_concordance }}</p>
        <p><strong>Número y etapa de réplicas técnicas:</strong> {{ data_analysis.technical_replicates_number_stage }}</p>
        <p><strong>Repetibilidad (Variación intra-ensayo):</strong> {{ data_analysis.intra_assay_variation_repeatability }}</p>
        <p><strong>Reproducibilidad (Variación inter-ensayo, %CV):</strong> {{ data_analysis.inter_assay_variation_reproducibility }}</p>
        <p><strong>Análisis de potencia:</strong> {{ data_analysis.power_analysis }}</p>
        <p><strong>Métodos estadísticos para significancia de resultados:</strong> {{ data_analysis.statistical_methods_significance }}</p>
        <p><strong>Software (fuente, versión):</strong> {{ data_analysis.software_source_version }}</p>
        <p><strong>Cq o Envío de datos crudos utilizando RDML:</strong> {{ data_analysis.cq_or_raw_data_rdml_submission }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>
    
    <label style="font-size: 25px; text-align: justify;">
    {% for data in real_time_pcr_data %}
        <p><strong><span style="font-size: 30px;">DATOS DE PCR EN TIEMPO REAL</span></strong></p>     
        <p><strong>Software de análisis de datos:</strong> {{ data.data_analysis_software }}</p>
        <p><strong>Método de cuantificación:</strong> {{ data.quantification_method }}</p>
        <p><strong>Datos crudos:</strong> {{ data.raw_data }}</p>
    {% endfor %}</label>

    <div style="margin-top: 30px;"></div>

    <label style="font-size: 25px; text-align: justify;">
    {% for result in results_data %}
        <p><strong><span style="margin-top: 30px; font-size: 30px;">RESULTADOS Y ANÁLISIS</span></strong></p>     
        <p><strong>Interpretación de resultados:</strong> {{ result.results_interpretation }}</p>
        <p><strong>Gráficos y figuras:</strong> {{ result.charts_figures }}</p>
    {% endfor %}</label>
    

<!-- Nuevo div para los botones y enlaces -->
<div style="margin-top: 20px;">
    <a href="{{ url_for('guardar_informe') }}" class="btn btn-success" style="font-size: 23px;">Generar PDF</a>
</div>



{% endblock %}






